# bridge

[HTTP bridge](https://github.com/ton-connect/docs/blob/main/bridge.md) implementation for TON Connect 2.0.

## 🏗️Architecture

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   TON Connect   │    │   TON Connect   │    │   TON Connect   │
│      App        │    │      App        │    │      App        │
└─────────┬───────┘    └─────────┬───────┘    └─────────┬───────┘
          │                      │                      │
          │ HTTP/SSE             │ HTTP/SSE             │ HTTP/SSE
          │                      │                      │
          ▼                      ▼                      ▼
┌───────────────────────────────────────────────────────────────┐
│                      TON Bridge Server                        │
├───────────────────────────────────────────────────────────────┤
│       ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │
│       │   Bridge    │  │  Monitoring │  │   Health    │       │
│       │  Endpoints  │  │   Metrics   │  │   Check     │       │
│       │             │  │ (Prometheus)│  │             │       │
│       └─────────────┘  └─────────────┘  └─────────────┘       │
│                                                               │
│       ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │
│       │   Message   │  │ Connection  │  │   Event     │       │
│       │   Router    │  │   Manager   │  │ Publisher   │       │
│       │             │  │             │  │    (SSE)    │       │
│       └─────────────┘  └─────────────┘  └─────────────┘       │
├───────────────────────────────────────────────────────────────┤
│                    Storage Layer (Optional)                   │
│  ┌──────────────────────────────────────────────────────────┐ │
│  │                       PostgreSQL                         │ │
│  │                  (Message Persistence)                   │ │
│  └──────────────────────────────────────────────────────────┘ │
└───────────────────────────────────────────────────────────────┘
          ▲                      ▲                      ▲
          │                      │                      │
          │ HTTP/SSE             │ HTTP/SSE             │ HTTP/SSE
          │                      │                      │
┌─────────┴───────┐    ┌─────────┴───────┐    ┌─────────┴───────┐
│    Wallet       │    │    Wallet       │    │    Wallet       │
│  Application    │    │  Application    │    │  Application    │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

### Production bridge setup

```
                     ┌────────┐
   ● ──►────────────►│ NGINX  │
                     └──┬─────┘
                        │
        ┌───────────────┼────────────────┐
        │               │                │
   ┌────▼─────┐    ┌────▼─────┐     ┌────▼─────┐
   │ BRIDGE 1 │    │ BRIDGE 2 │     │ BRIDGE 3 │
   └────┬─────┘    └────┬─────┘     └────┬─────┘
        │               │                │
        │               ▼                │
        │          ┌─────────┐           │
        └─────────►│ DB(TODO)│◄──────────┘
                   └─────────┘ 
```
